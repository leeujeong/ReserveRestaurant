<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.reserve.restaurant.repository.RestaurantRepository">
	
	<select id="selectMyRestaurantList" resultType="Restaurant" >
		SELECT R.res_no, R.res_name, R.res_loc, R.res_hours, R.res_tel, R.res_date, R.origin, R.saved, R.path, R.owner_o_no 
		  FROM restaurant R, owner O
		 WHERE R.owner_o_no = O.o_no
	</select>
	
	<select id="selectRestaurantByNo" parameterType="Long" resultType="Restaurant">
		SELECT res_no, res_name, res_loc, res_hours, res_tel, res_date, origin, saved, path
		  FROM restaurant
		 WHERE res_no = #{resNo}
	</select>
	
	<insert id="addRestaurant" parameterType="Restaurant"> 
		INSERT INTO restaurant
		VALUES (res_no_seq.nextval, #{resName}, #{resLoc}, #{resTel}, #{redDate}, #{origin}, #{saved}, #{path}, o_no_seq.nextval)
	</insert>
	
	<update id="modifyRestaurant" parameterType="Restaurant">
		UPDATE restaurant
		   SET res_name = #{resName},
		   	   res_loc = #{resLoc}, 
		   	   res_hours = #{resHours},
		   	   res_tel = #{resTel},
		   	   res_date = #{resDate}, 
		   	   origin = #{origin},
		   	   saved = #{saved},
		   	   path = #{path}
	</update>
	
	<delete id ="removeRestaurant" parameterType="Long">
		DELETE 
		  FROM restaurant
		 WHERE res_no = #{resNo}
	</delete>
</mapper>